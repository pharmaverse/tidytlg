# tidytlg

The goal of tidytlg is to generate table, listings, and graphs (TLG)
using Tidyverse. This can be achieved multiple ways with this package.

- Functional method: build a custom script for each TLG
- Metadata method: build a generic script that utilizes column and table
  metadata to produce each TLG result

## Installation

### Development version

``` r
# install.packages("devtools")
devtools::install_github("pharmaverse/tidytlg")
```

## Functional method example

``` r
library(dplyr)
library(tidytlg)

# Note cdisc_adsl is built into the package for use
ittpop <- cdisc_adsl %>%
  filter(ITTFL == "Y")

# frequency of Intend-to-Treat patients by planned treatment
tbl1 <- freq(ittpop,
             rowvar = "ITTFL",
             statlist = statlist("n"),
             colvar = "TRT01P",
             rowtext = "Analysis Set:  Intend-to-Treat Population",
             subset = ITTFL == "Y")

# N, MEAN (SD), MEDIAN, RANGE, IQ Range of age by planned treatment
tbl2 <- univar(ittpop,
               rowvar = "AGE",
               colvar = "TRT01P",
               row_header = "Age (Years)")

# frequency of Race by planned treatment
tbl3 <- freq(ittpop,
             rowvar =  "RACE",
             statlist = statlist(c("N", "n (x.x%)")),
             colvar = "TRT01P",
             row_header = "Race, n(%)")

# combine results together
tbl <- bind_table(tbl1, tbl2, tbl3)

# conver to hux object -----------------------------------------------------------------
gentlg(huxme       = tbl ,
       orientation = "landscape",
       file        = "DEMO",
       title       = "Custom Method",
       footers     = "Produced with tidytlg",
       colspan     = list(c("", "", "Xanomeline", "Xanomeline")),
       colheader   = c("", "Placebo", "High", "Low"),
       wcol        = .30)
```

## Metadata method example

``` r
library(dplyr)
library(tidytlg)

adsl <- cdisc_adsl

table_metadata <- tibble::tribble(
  ~anbr,~func,    ~df,     ~rowvar,            ~rowtext,   ~row_header,                    ~statlist,         ~subset,
  1,   "freq", "adsl",     "ITTFL", "Analysis set: itt",            NA,                statlist("n"),  "ITTFL == 'Y'",
  2, "univar", "adsl",       "AGE",                  NA, "Age (Years)",                           NA,              NA,
  3,   "freq", "adsl",      "RACE",                  NA,  "Race, n(%)", statlist(c("N", "n (x.x%)")),              NA
) %>%
  mutate(colvar  = "TRT01PN")

tbl <- generate_results(table_metadata, 
                        column_metadata_file = system.file("extdata/column_metadata.xlsx", package = "tidytlg"),
                        tbltype = "type1") 

# conver to hux object -----------------------------------------------------------------
tblid <- "Table01"

gentlg(huxme       = tbl,
       orientation = "landscape",
       file        = tblid,
       title_file = system.file("extdata/titles.xls", package = "tidytlg"),
       wcol        = .30)
```

# Package index

## All functions

- [`add_bottom_borders()`](add_bottom_borders.md) :

  Adds bottom borders to a `huxtable`

- [`add_format()`](add_format.md) :

  Add the formatting variables of `indentme`, `newrows`, `newpage`, and
  `roworder` to the results dataframe

- [`add_indent()`](add_indent.md) : Add indentation variable to the
  results dataframe

- [`add_newrows()`](add_newrows.md) :

  Add the `newrows` variable to the results dataframe.

- [`bind_table()`](bind_table.md) :

  Bind a set of `tidytlg` tables together with formatting variables

- [`cdisc_adae`](cdisc-adae.md) :

  `ADAE` data created from subsetting the `CDISC` `ADAE` dataset

- [`cdisc_adlb`](cdisc-adlb.md) :

  `ADLB` data created from subsetting the `CDISC` `ADLB` dataset

- [`cdisc_adsl`](cdisc-adsl.md) :

  `ADSL` data created from subsetting the `CDISC` `ADSL` with 15
  subjects (5 subjects in each arm)

- [`cdisc_advs`](cdisc-advs.md) :

  `ADVS` data created from subsetting the `CDISC` `ADVS` dataset

- [`char2factor()`](char2factor.md) : Convert character variable to a
  factor based off it's numeric variable counterpart.

- [`col_borders()`](col_borders.md) : Adds borders under cells in a
  column

- [`column_metadata`](column_metadata.md) : Metadata describing table
  column layouts

- [`tidytlg_titles()`](files.md) [`tidytlg_metadata()`](files.md) :

  Helper functions for returning files used in `gentlg`

- [`freq()`](freq.md) : Frequency counts and percentages

- [`generate_results()`](generate_results.md) : Generate Results using
  Table and Column Metadata

- [`gentlg()`](gentlg.md) :

  Output a `tidytlg` table

- [`nested_freq()`](nested_freq.md) : Generate nested count/percent for
  two or three levels

- [`no_borders()`](no_borders.md) : Removes all borders from the table

- [`replace_na_with_blank()`](replace_na_with_blank.md) : Replace NA
  with ""

- [`rmdpstitle()`](rmdpstitle.md) : Get Titles and Footnotes for all
  TLGs or one specific TLG

- [`roundSAS()`](roundSAS.md) : SAS rounding in R

- [`row_border()`](row_border.md) : Adds a continuous bottom border
  under a row

- [`single_border()`](single_border.md) : Adds a border under a cell

- [`spanning_borders()`](spanning_borders.md) : Adds borders under cells
  in a row, excluding the first column.

- [`spanning_headers()`](spanning_headers.md) : Spanning headers for
  outputs

- [`statlist()`](statlist.md) :

  Create a `statlist` interface for a table

- [`table_metadata`](table_metadata.md) : Metadata describing the data,
  functions and arguments needed to produce your results.

- [`tlgsetup()`](tlgsetup.md) : Setup data to support the specified
  column type

- [`univar()`](univar.md) : Descriptive statistics

# Articles

### All vignettes

- [Frequency Analysis](freq.md):
- [Tips & Tricks: Including Symbols, Superscripts, Subscripts & Line
  Breaks](symbols.md):
- [Manipulating \`tbl\` data frame](tbl_manipulation.md):
- [Get Started](tidytlg.md):
- [Column Metadata & How tidytlg Sets Up Your Data Using
  \`tlgsetup\`](tlgsetup.md):
- [Univariate Statistics Analysis](univar.md):
