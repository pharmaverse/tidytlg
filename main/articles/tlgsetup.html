<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Column Metadata &amp; How tidytlg Sets Up Your Data Using `tlgsetup` • tidytlg</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Column Metadata &amp; How tidytlg Sets Up Your Data Using `tlgsetup`">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidytlg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/tidytlg.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/freq.html">Frequency Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/symbols.html">Tips &amp; Tricks:  Including Symbols, Superscripts, Subscripts &amp; Line Breaks</a></li>
    <li><a class="dropdown-item" href="../articles/tbl_manipulation.html">Manipulating `tbl` data frame</a></li>
    <li><a class="dropdown-item" href="../articles/tlgsetup.html">Column Metadata &amp; How tidytlg Sets Up Your Data Using `tlgsetup`</a></li>
    <li><a class="dropdown-item" href="../articles/univar.html">Univariate Statistics Analysis</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/tidytlg/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Column Metadata &amp; How tidytlg Sets Up Your Data Using `tlgsetup`</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/tidytlg/blob/main/vignettes/tlgsetup.Rmd" class="external-link"><code>vignettes/tlgsetup.Rmd</code></a></small>
      <div class="d-none name"><code>tlgsetup.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pharmaverse.github.io/tidytlg/main/" class="external-link">tidytlg</a></span><span class="op">)</span></span></code></pre></div>
<p>The <code>tlgsetup</code> helper function was created to support
generating different column structures for our outputs. This allows us
to specify column types once that can be used across multiple outputs.
This metadata can be hardcoded as well (please see the code below), or
pulled from another source like a dataframe, file or database.</p>
<p>Here we see an example of the column metadata which defines our
columns, how to combine columns, column labels and spanning headers
across columns.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">column_metadata</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>    <span class="op">~</span><span class="va">tbltype</span>, <span class="op">~</span><span class="va">coldef</span>, <span class="op">~</span><span class="va">decode</span>,                <span class="op">~</span><span class="va">span1</span>,</span>
<span>    <span class="st">"type1"</span>,  <span class="st">"0"</span>,     <span class="st">"Placebo"</span>,              <span class="st">""</span>,</span>
<span>    <span class="st">"type1"</span>,  <span class="st">"54"</span>,    <span class="st">"Low Dose"</span>,             <span class="st">"Xanomeline"</span>,</span>
<span>    <span class="st">"type1"</span>,  <span class="st">"81"</span>,    <span class="st">"High Dose"</span>,            <span class="st">"Xanomeline"</span>,</span>
<span>    <span class="st">"type1"</span>,  <span class="st">"54+81"</span>, <span class="st">"Total Xanomeline"</span>,     <span class="st">""</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">column_metadata</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 4</span></span></span>
<span><span class="co">#&gt;   tbltype coldef decode           span1       </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> type1   0      Placebo          <span style="color: #949494;">""</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> type1   54     Low Dose         <span style="color: #949494;">"</span>Xanomeline<span style="color: #949494;">"</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> type1   81     High Dose        <span style="color: #949494;">"</span>Xanomeline<span style="color: #949494;">"</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> type1   54+81  Total Xanomeline <span style="color: #949494;">""</span></span></span></code></pre></div>
<p>In this example, we would summarize <code>Placebo</code>,
<code>Xanomeline Low Dose</code>, and <code>Xanomeline High Dose</code>
which are already available in the data. The helper function will add
the observations to the data for the <code>Total Xanomeline</code>
column based off of <code>coldef</code>. So for our <code>adsl</code>
data, we will add a spanning header for <code>Xanomeline</code> and a
total <code>Xanomeline</code> column which is a combination of the
<code>Xanomeline Low Dose</code> and
<code>Xanomeline High Dose</code>.</p>
<p>In addition, the helper function will add the factor variable
<code>colnbr</code> which is used as our new column summary variable.
Note that our column summary variable has been converted to a factor.
This is required and allows us to define column order as well as label
in one variable.</p>
<p>Let’s read in <code>adsl</code> and check the dimensions.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"cdisc_adsl"</span><span class="op">)</span></span>
<span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="va">cdisc_adsl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ITTFL</span> <span class="op">==</span> <span class="st">"Y"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">TRT01PN</span>, <span class="va">TRT01P</span>, <span class="va">ITTFL</span>, <span class="va">SEX</span>, <span class="va">RACE</span>, <span class="va">AGE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 15</span></span>
<span><span class="co">#&gt; Columns: 7</span></span>
<span><span class="co">#&gt; $ USUBJID <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "01-701-1015"<span style="color: #949494;">, </span>"01-701-1023"<span style="color: #949494;">, </span>"01-701-1047"<span style="color: #949494;">, </span>"01-701-1118"<span style="color: #949494;">, </span>"0…</span></span>
<span><span class="co">#&gt; $ TRT01PN <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>54<span style="color: #949494;">, </span>54<span style="color: #949494;">, </span>54<span style="color: #949494;">, </span>54<span style="color: #949494;">, </span>54<span style="color: #949494;">, </span>81<span style="color: #949494;">, </span>81<span style="color: #949494;">, </span>81<span style="color: #949494;">, </span>81<span style="color: #949494;">, </span>81</span></span>
<span><span class="co">#&gt; $ TRT01P  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Placebo"<span style="color: #949494;">, </span>"Placebo"<span style="color: #949494;">, </span>"Placebo"<span style="color: #949494;">, </span>"Placebo"<span style="color: #949494;">, </span>"Placebo"<span style="color: #949494;">, </span>"Xanome…</span></span>
<span><span class="co">#&gt; $ ITTFL   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y…</span></span>
<span><span class="co">#&gt; $ SEX     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "F"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"F"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"F"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"F"<span style="color: #949494;">, </span>"F…</span></span>
<span><span class="co">#&gt; $ RACE    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ AGE     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 63<span style="color: #949494;">, </span>64<span style="color: #949494;">, </span>85<span style="color: #949494;">, </span>52<span style="color: #949494;">, </span>84<span style="color: #949494;">, </span>74<span style="color: #949494;">, </span>68<span style="color: #949494;">, </span>81<span style="color: #949494;">, </span>84<span style="color: #949494;">, </span>71<span style="color: #949494;">, </span>71<span style="color: #949494;">, </span>77<span style="color: #949494;">, </span>81<span style="color: #949494;">, </span>75<span style="color: #949494;">, </span>57</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] "Dimensions prior to the tlgsetup call are 15 rows and 7 columns."</span></span></code></pre>
<p>Now let’s pass the <code>adsl</code> data through our
<code>tlgsetup</code> function to add observations to support the
<code>type1</code> column structure and check out the dimensions.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">setup_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tlgsetup.html">tlgsetup</a></span><span class="op">(</span><span class="va">adsl</span>,</span>
<span>  var <span class="op">=</span> <span class="st">"TRT01PN"</span>,</span>
<span>  column_metadata <span class="op">=</span> <span class="va">column_metadata</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">setup_table</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 25</span></span>
<span><span class="co">#&gt; Columns: 9</span></span>
<span><span class="co">#&gt; $ tbltype <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "type1"<span style="color: #949494;">, </span>"type1"<span style="color: #949494;">, </span>"type1"<span style="color: #949494;">, </span>"type1"<span style="color: #949494;">, </span>"type1"<span style="color: #949494;">, </span>"type1"<span style="color: #949494;">, </span>"type1"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ colnbr  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> col1<span style="color: #949494;">, </span>col1<span style="color: #949494;">, </span>col1<span style="color: #949494;">, </span>col1<span style="color: #949494;">, </span>col1<span style="color: #949494;">, </span>col2<span style="color: #949494;">, </span>col2<span style="color: #949494;">, </span>col2<span style="color: #949494;">, </span>col2<span style="color: #949494;">, </span>col2<span style="color: #949494;">, </span>co…</span></span>
<span><span class="co">#&gt; $ USUBJID <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "01-701-1015"<span style="color: #949494;">, </span>"01-701-1023"<span style="color: #949494;">, </span>"01-701-1047"<span style="color: #949494;">, </span>"01-701-1118"<span style="color: #949494;">, </span>"0…</span></span>
<span><span class="co">#&gt; $ TRT01PN <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0"<span style="color: #949494;">, </span>"0"<span style="color: #949494;">, </span>"0"<span style="color: #949494;">, </span>"0"<span style="color: #949494;">, </span>"0"<span style="color: #949494;">, </span>"54"<span style="color: #949494;">, </span>"54"<span style="color: #949494;">, </span>"54"<span style="color: #949494;">, </span>"54"<span style="color: #949494;">, </span>"54"<span style="color: #949494;">, </span>"81"<span style="color: #949494;">, </span>"…</span></span>
<span><span class="co">#&gt; $ TRT01P  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Placebo"<span style="color: #949494;">, </span>"Placebo"<span style="color: #949494;">, </span>"Placebo"<span style="color: #949494;">, </span>"Placebo"<span style="color: #949494;">, </span>"Placebo"<span style="color: #949494;">, </span>"Xanome…</span></span>
<span><span class="co">#&gt; $ ITTFL   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y"<span style="color: #949494;">, </span>"Y…</span></span>
<span><span class="co">#&gt; $ SEX     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "F"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"F"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"F"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"M"<span style="color: #949494;">, </span>"F"<span style="color: #949494;">, </span>"F…</span></span>
<span><span class="co">#&gt; $ RACE    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">, </span>"WHITE"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ AGE     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 63<span style="color: #949494;">, </span>64<span style="color: #949494;">, </span>85<span style="color: #949494;">, </span>52<span style="color: #949494;">, </span>84<span style="color: #949494;">, </span>74<span style="color: #949494;">, </span>68<span style="color: #949494;">, </span>81<span style="color: #949494;">, </span>84<span style="color: #949494;">, </span>71<span style="color: #949494;">, </span>71<span style="color: #949494;">, </span>77<span style="color: #949494;">, </span>81<span style="color: #949494;">, </span>75<span style="color: #949494;">, </span>57<span style="color: #949494;">, </span>74…</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] "Dimensions after to the rmtsetup call are 25 rows and 9 columns."</span></span></code></pre>
<p>Here we see we have added two new variables, <code>colnbr</code> and
<code>tbltype</code>, which will now be used as our treatment variable
when generating our results.</p>
<p>If we take a look at the observation counts for <code>colnbr</code>,
we see the 168 records added to the data support
<code>Total Xanomeline</code> as we expected!</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">setup_table</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">colnbr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 2</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   colnbr [4]</span></span></span>
<span><span class="co">#&gt;   colnbr     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> col1       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> col2       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> col3       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> col4      10</span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicholas Masel, Steven Haesendonckx, Pelagia Alexandra Papadopoulou, Sheng-Wei Wang, Eli Miller, Nathan Kosiba, Aidan Ceney, Janssen R&amp;D, Konrad Pagacz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
